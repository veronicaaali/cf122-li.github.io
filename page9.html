<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>How's your mood today?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./common.css" />
    <link rel="stylesheet" href="./page1.css" />
    <style>
      .slider {
        animation: slide 4.5s linear infinite;
      }
      @keyframes slide {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-10%);
        }
      }
    </style>
  </head>
  <body>
    <div class="flex-col" style="height: 100%">
      <div class="top spacer">
        <div class="hamburger">
          <img src="images/ham.png" />
          <img src="images/ham.png" />
          <img src="images/ham.png" />
        </div>
        <div class="top-txt">Home</div>
      </div>
      <div
        style="
          height: 13.4vh;
          min-height: 13.4vh;
          flex-shrink: 0;
          width: 100%;
          overflow: hidden;
          background-color: #f3a208;
        "
        class="flex-row"
      >
        <!-- prettier-ignore -->
        <div
          class="slider"
          style="
            font-size: 5.86vh;
            line-height: 5.86vh;
            color: white;
            white-space: pre;
            margin-top:0.13em;
            align-self: center;
            width: fit-content;
          "
        >Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     Howâ€™s Your Mood  Today?     </div>
      </div>
      <div
        id="inner-content"
        style="flex: 1; position: relative; min-height: 0"
      >
        <canvas
          id="world"
          style="height: 100%; width: 100%; pointer-events: all"
        ></canvas>
        <div
          style="
            position: absolute;
            font-size: 8.79vh;
            color: black;
            top: 4.39vh;
            left: 4.37vh;
          "
        >
          How's your mood today?
        </div>
      </div>
    </div>
    <div class="top actual">
  <div id="hamburger-actual" class="hamburger">
    <img src="images/ham.png" />
    <img src="images/ham.png" />
    <img src="images/ham.png" />
  </div>
  <div class="menu-container">
    <div id="top-menu">
      <div id="home-button">
        <div style="margin-top: 0.13em">Back to Wheel</div>
      </div>
      <div class="menu-content">
        

        <div class="menu-emoji 0">ğŸ˜®â€ğŸ’¨</div>
        

        <div class="menu-emoji 1">ğŸ˜ª</div>
        

        <div class="menu-emoji 2">ğŸ˜˜</div>
        

        <div class="menu-emoji 3">ğŸ˜‘</div>
        

        <div class="menu-emoji 4">ğŸ˜¤</div>
        

        <div class="menu-emoji 5">ğŸ™„</div>
        

        <div class="menu-emoji 6">ğŸ˜</div>
        

        <div class="menu-emoji 7">ğŸ˜</div>
        

        <div class="menu-emoji 8">ğŸ”®</div>
        

        <div class="menu-emoji 9">ğŸ˜¨</div>
        

        <div class="menu-emoji 10">ğŸ˜µâ€ğŸ’«</div>
        
      </div>
    </div>
  </div>
  <div id="top-title" class="top-txt">Home</div>
</div>
<script>
  const title = document.getElementById("top-title");
  const hamburger = document.getElementById("hamburger-actual");
  const menu = document.getElementById("top-menu");
  const homeButton = document.getElementById("home-button");
  const menuContent = document.querySelector(".menu-content");
  /** @type{HTMLDivElement} */
  const magicEmoji = document.querySelector(".menu-emoji.magic");
  // console.log(menuContent)

  homeButton.onclick = () => {
    window.location.href = "./index.html";
  };

  const handleChangeOpen = (shouldOpen) => {
    if (shouldOpen) {
      title.innerText = "How's your mood today?";
      menu.style.display = "flex";
    } else {
      title.innerText = "Home";
      menu.style.display = "none";
    }
  };
  hamburger.onmouseenter = () => handleChangeOpen(true);
  menu.onmouseleave = () => handleChangeOpen(false);

  for (let i = 0; i < menuContent.children.length; i++) {
    // if (i > 11) menuContent.children[i].style.display = "none";
    menuContent.children[i].onclick = () => {
      window.location.href = `./page${i + 1}.html`;
    };
  }
  const vh = (px) => `${px / 10.24}vh`;
  menuContent.children[0].style.left = vh(54);
  menuContent.children[0].style.top = vh(223);

  menuContent.children[1].style.right = vh(39);
  menuContent.children[1].style.top = vh(144);

  menuContent.children[2].style.right = vh(176);
  menuContent.children[2].style.top = vh(51);

  menuContent.children[3].style.right = vh(46);
  menuContent.children[3].style.bottom = vh(48);

  menuContent.children[4].style.right = vh(81);
  menuContent.children[4].style.top = vh(271);

  menuContent.children[5].style.left = vh(89);
  menuContent.children[5].style.top = vh(48);
  
  menuContent.children[6].style.right = vh(226);
  menuContent.children[6].style.bottom = vh(129);
  
  menuContent.children[7].style.left = vh(113);
  menuContent.children[7].style.bottom = vh(60);

  menuContent.children[8].style.top = vh(270);
  menuContent.children[8].style.left = vh(240);

  menuContent.children[9].style.bottom = vh(129);
  menuContent.children[9].style.right = vh(226);

  menuContent.children[10].style.top = vh(153);
  menuContent.children[10].style.left = vh(217);

  // console.log(magicEmoji);
  // magicEmoji.style.top = vh(280);
  // magicEmoji.style.left = vh(250);
  // magicEmoji.onclick = () => {
  //   window.location.href = `./page${9}.html`;
  // };
</script>

  </body>
  <script src="./matter.js" type="text/javascript"></script>
  <script>
    const emojis = [ // only length is used here!
      "ğŸ˜˜",
      "ğŸ˜¡",
      "ğŸ˜¤",
      "ğŸ˜‘",
      "ğŸ˜µâ€ğŸ’«",
      "ğŸ˜‚",
      "ğŸ˜±",
      "ğŸ˜",
      "ğŸ˜ª",
      "ğŸ˜­",
      "ğŸ˜³",
      "ğŸ¤¤",
    ];
    const gravityScale = 0.8;
    const canvas = document.getElementById("world");
    const { width, height } = canvas.getBoundingClientRect();
    // canvas.width = width;
    // canvas.height = height;
    console.log(canvas.getBoundingClientRect(), width, height);
    const engine = Matter.Engine.create({
      gravity: {
        y: gravityScale,
      },
    });
    const render = Matter.Render.create({
      canvas,
      engine,
      options: {
        showVelocity: true,
        background: "transparent",
        // wireframeBackground: "transparent",
        height,
        width,
        pixelRatio: devicePixelRatio,
        wireframes: false,
      },
    });
    Matter.Render.run(render);

    const runner = Matter.Runner.create();
    Matter.Runner.run(runner, engine);
    const Composite = Matter.Composite,
      Bodies = Matter.Bodies,
      Mouse = Matter.Mouse,
      MouseConstraint = Matter.MouseConstraint;

    const radius = width / 13;
    const wallThickness = 50;
    const frictionAir = 0.01;
    const restitution = 0.9;
    const textureScale = (radius * 0.037 * 60) / 160;
    const extraWallHeight = 10;
    const startUpBoost = height;

    const mouse = Mouse.create(render.canvas),
      mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: {
          stiffness: 0.2,
          render: {
            visible: false,
          },
        },
      });
    Composite.add(engine.world, mouseConstraint);
    Composite.add(engine.world, [
      ...emojis.map((emoji, i) =>
        Bodies.circle(
          Math.random() * width,
          Math.random() * height - Math.random() * startUpBoost,
          radius,
          {
            frictionAir,
            restitution,
            density: 10,
            render: {
              sprite: {
                texture: `images/wheel-emoji-${i + 1}y.png`,
                xScale: textureScale,
                yScale: textureScale,
              },
            },
            
          }
        )
      ),
      // walls
      Bodies.rectangle(
        width / 2,
        height + wallThickness / 2,
        width,
        wallThickness,
        { isStatic: true }
      ),
      Bodies.rectangle(
        -wallThickness / 2,
        height / 2 - extraWallHeight / 2,
        wallThickness,
        height + extraWallHeight,
        {
          isStatic: true,
        }
      ),
      Bodies.rectangle(
        width + wallThickness / 2,
        height / 2 - extraWallHeight / 2,
        wallThickness,
        height + extraWallHeight,
        { isStatic: true }
      ),
    ]);
    console.log(render, engine, runner);
    Matter.Render.lookAt(render, {
      min: { x: 0, y: 0 },
      max: { x: width, y: height },
    });
  </script>
</html>
