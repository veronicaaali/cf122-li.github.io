<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mooood</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./common.css" />
    <link rel="stylesheet" href="./indexpage.css" />
  </head>
  <body>
    <div class="bg">
      <div class="i i-hamburger">🍔</div>
      <div class="i i-eggpan">🍳</div>
      <div class="i i-pizza">🍕</div>
      <div class="i i-popcorn">🍿️</div>
      <div class="í i-icecream">🍧</div>
      <div class="i i-cake">🍰</div>
    </div>
    <div class="container">
      <div class="top spacer">
        <div class="hamburger">
          <img src="images/ham.png" />
          <img src="images/ham.png" />
          <img src="images/ham.png" />
        </div>
        <div class="top-txt">Home</div>
      </div>
      <div class="page1-main">
        <div style="flex: 84"></div>
        <div class="left">
          <div class="howdy">
            How’s Your <br />
            Mood Today?
          </div>
          <div class="flex-row">
            <div class="clickhere">Click Here→</div>
            <img class="cake" src="images/cake.jpg" />
          </div>
        </div>
        <div style="flex: 96"></div>
        <div class="wheel">
          <img class="clock-pin" src="images/clockpin.svg" />
          <img class="clock-center" src="images/clockcenter.svg" />
          <div class="emoji-container n1"></div>
          <div class="emoji-container n2"></div>
          <div class="emoji-container n3"></div>
          <div class="emoji-container n4"></div>
          <div class="emoji-container n5"></div>
          <div class="emoji-container n6"></div>
          <div class="emoji-container n7"></div>
          <div class="emoji-container n8"></div>
          <div class="emoji-container n9"></div>
          <div class="emoji-container n10"></div>
          <div class="emoji-container n11"></div>
          <div class="emoji-container n12"></div>
        </div>
        <div style="flex: 65"></div>
      </div>
      <div class="top actual">
        <div id="hamburger-actual" class="hamburger">
          <img src="images/ham.png" />
          <img src="images/ham.png" />
          <img src="images/ham.png" />
        </div>
        <div class="menu-container">
          <div id="top-menu">
            <div id="home-button">
              <div style="margin-top: 0.13em">Back to Wheel</div>
            </div>
            <div class="menu-content">
              <div class="menu-emoji 0">😮‍💨</div>

              <div class="menu-emoji 1">😪</div>

              <div class="menu-emoji 2">😘</div>

              <div class="menu-emoji 3">😑</div>

              <div class="menu-emoji 4">😤</div>

              <div class="menu-emoji 5">🙄</div>

              <div class="menu-emoji 6">😎</div>

              <div class="menu-emoji 7">😍</div>

              <div class="menu-emoji 8">🔮</div>

              <div class="menu-emoji 9">😨</div>

              <div class="menu-emoji 10">😵‍💫</div>
            </div>
          </div>
        </div>
        <div id="top-title" class="top-txt">Home</div>
      </div>
      <script>
        const title = document.getElementById("top-title");
        const hamburger = document.getElementById("hamburger-actual");
        const menu = document.getElementById("top-menu");
        const homeButton = document.getElementById("home-button");
        const menuContent = document.querySelector(".menu-content");
        /** @type{HTMLDivElement} */
        const magicEmoji = document.querySelector(".menu-emoji.magic");
        // console.log(menuContent)

        homeButton.onclick = () => {
          window.location.href = "./index.html";
        };

        const handleChangeOpen = (shouldOpen) => {
          if (shouldOpen) {
            title.innerText = "How's your mood today?";
            menu.style.display = "flex";
          } else {
            title.innerText = "Home";
            menu.style.display = "none";
          }
        };
        hamburger.onmouseenter = () => handleChangeOpen(true);
        menu.onmouseleave = () => handleChangeOpen(false);

        for (let i = 0; i < menuContent.children.length; i++) {
          // if (i > 11) menuContent.children[i].style.display = "none";
          menuContent.children[i].onclick = () => {
            window.location.href = `./page${i + 1}.html`;
          };
        }
        const vh = (px) => `${px / 10.24}vh`;
        menuContent.children[0].style.left = vh(54);
        menuContent.children[0].style.top = vh(223);

        menuContent.children[1].style.right = vh(39);
        menuContent.children[1].style.top = vh(144);

        menuContent.children[2].style.right = vh(176);
        menuContent.children[2].style.top = vh(51);

        menuContent.children[3].style.right = vh(46);
        menuContent.children[3].style.bottom = vh(48);

        menuContent.children[4].style.right = vh(81);
        menuContent.children[4].style.top = vh(271);

        menuContent.children[5].style.left = vh(89);
        menuContent.children[5].style.top = vh(48);

        menuContent.children[6].style.right = vh(226);
        menuContent.children[6].style.bottom = vh(129);

        menuContent.children[7].style.left = vh(113);
        menuContent.children[7].style.bottom = vh(60);

        menuContent.children[8].style.top = vh(270);
        menuContent.children[8].style.left = vh(240);

        menuContent.children[9].style.bottom = vh(129);
        menuContent.children[9].style.right = vh(226);

        menuContent.children[10].style.top = vh(153);
        menuContent.children[10].style.left = vh(217);

        // console.log(magicEmoji);
        // magicEmoji.style.top = vh(280);
        // magicEmoji.style.left = vh(250);
        // magicEmoji.onclick = () => {
        //   window.location.href = `./page${9}.html`;
        // };
      </script>

      <script>
        const emojis = [
          "😮‍💨",
          "😪",
          "😘",
          "😑",
          "😤",
          "🙄",
          "😎",
          "😍",
          "🔮",
          "😨",
          "😵‍💫",
          "😝",
        ];
        for (let i = 0; i < 12; i++) {
          const container = document.querySelector(
            `.emoji-container.n${i + 1}`
          );
          const w = container.getBoundingClientRect().width;
          container.innerHTML = `<div class="wheel-emoji" style="font-size:${
            (w * 70) / 110
          }px">${emojis[i]}</div>`;
        }
        const wheel = document.querySelector(".wheel");
        const btn = document.querySelector(".clickhere");
        const pin = document.querySelector(".clock-pin");
        const emojiImgs = document.querySelectorAll(".wheel-emoji");
        const cake = document.querySelector(".cake");

        let emojiIndex = 0;

        const doDeree = (n) => {
          // wheel.style.transform = `rotate(${n}deg)`;
          pin.style.transform = `translate(-50%, -100%) rotate(${n}deg)`;
          emojiIndex = Math.floor((((n - 15) % 360) / 30 + 12) % 12);
          // console.log(emojiIndex);
          emojiImgs.forEach((emoji, index) => {
            if (index === emojiIndex) {
              emoji.classList.add("active");
            } else {
              emoji.classList.remove("active");
            }
          });
        };

        const goDegree = () => {
          let max = 11;
          const magicIndex = 9;
          console.log("page", emojiIndex + 1);
          emojiImgs.forEach((emoji, index) => {
            if (
              index === emojiIndex &&
              (emojiIndex < max || emojiIndex + 1 === magicIndex)
            ) {
              setTimeout(() => {
                emoji.style.transitionDuration = "1s";
                emoji.style.transform = "scale(5)";
                emoji.parentElement.style.zIndex = 100;
                setTimeout(() => {
                  window.location.href = `page${emojiIndex + 1}.html`;
                }, 1000);
              }, 600);
            }
          });
        };

        let n = 0;
        let stopped = true;
        let topSpeed = 2;
        let speed = 0.25;
        let accel = 0.005;

        const interval = setInterval(() => {
          if (stopped) {
            speed = 0.3;
            return;
          }

          n += speed;
          if (speed < topSpeed) {
            speed += accel;
          }
          doDeree(n);
        }, 3);

        const run = () => {
          if (!stopped) {
            stopped = true;
            goDegree();
          } else {
            stopped = false;
          }
        };
        cake.onmousedown = run;
      </script>
    </div>
  </body>
</html>
